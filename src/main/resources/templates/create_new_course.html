<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from gambolthemes.net/html-items/cursus_demo_f12/create_new_course.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 19 May 2021 03:49:46 GMT -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, shrink-to-fit=9">
    <meta name="description" content="Gambolthemes">
    <meta name="author" content="Gambolthemes">
    <title>Tạo Khóa Học</title>

    <link href="css/sweetalert.css" rel="stylesheet" />
    <script src="/js/sweetalert.min.js"></script>

    <link rel="icon" type="image/png" href="images/fav.png">

    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700,500" rel='stylesheet'>
    <link href='/vendor/unicons-2.0.1/css/unicons.css' rel='stylesheet'>
    <link href="/css/vertical-responsive-menu1.min.css" rel="stylesheet">
    <link href="/css/instructor-dashboard.css" rel="stylesheet">
    <link href="/css/instructor-responsive.css" rel="stylesheet">
    <link href="/css/night-mode.css" rel="stylesheet">
    <link href="/css/jquery-steps.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">

    <link href="/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="/vendor/OwlCarousel/assets/owl.carousel.css" rel="stylesheet">
    <link href="/vendor/OwlCarousel/assets/owl.theme.default.min.css" rel="stylesheet">
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/vendor/semantic/semantic.min.css">

    <script src="js/jquery.min.js"></script>
    <script src="js/chosen.jquery.min.js"></script>
    <link href="css/chosen.min.css" rel="stylesheet" />

</head>

<body>


    	   <!-- Thanh header -->
    <div id="header_html"></div>

    <!-- thanh menu  -->
    <div id="menu_user_html"></div>

    <!-- Thanh main -->
    <div class="wrapper">
        <div class="sa4d25">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <h2 class="st_title"><i class="uil uil-analysis"></i> Tạo Khóa Học</h2>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="course_tabs_1">
                            <div id="add-course-tab" class="step-app">
                                <ul class="step-steps">
                                    <li class="active">
                                        <a href="#tab_step1">
                                            <span class="number"></span>
                                            <span class="step-name">Thông tin khóa học</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#tab_step2">
                                            <span class="number"></span>
                                            <span class="step-name">Hình ảnh / Video</span>
                                        </a>
                                    </li>
                                    
                                </ul>
                                <div class="step-content">
                                    <div class="step-tab-panel step-tab-info active" id="tab_step1">
                                        <div class="tab-from-content">
                                            <div class="title-icon">
                                                <h3 class="title"><i class="uil uil-info-circle"></i>Thông tin
                                                </h3>
                                            </div>
                                            <div class="course__form">
                                                <div class="general_info10">
                                                    <div class="row">
                                                        <div class="col-lg-6 col-md-6">
                                                            <div class="ui search focus mt-30 lbel25">
                                                                <label>Tên Khóa học*</label>
                                                                <div class="ui left icon input swdh19">
                                                                    <input class="prompt srch_explore" type="text"
                                                                        placeholder="Nhập tên khóa học." name="title"
                                                                        data-purpose="edit-course-title" maxlength="60"
                                                                        id="nameGeneralCourse">
                                                                    <div class="badge_num">60</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-6 col-md-6">
                                                            <div class="ui search focus mt-30 lbel25">
                                                                <label>Phụ đề*</label>
                                                                <div class="ui left icon input swdh19">
                                                                    <input class="prompt srch_explore" type="text"
                                                                        placeholder="Nhập phụ đề khóa học."
                                                                        name="subtitle" data-purpose="edit-course-title"
                                                                        maxlength="60" id="sub[title]" value="">
                                                                    <div class="badge_num2">120</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-12 col-md-12">
                                                            <div class="course_des_textarea mt-30 lbel25">
                                                                <label>Mô tả khóa học*</label>
                                                                <div class="course_des_bg">
                                                                    <ul class="course_des_ttle">
                                                                        <li><a href="#"><i class="uil uil-bold"></i></a>
                                                                        </li>
                                                                        <li><a href="#"><i
                                                                                    class="uil uil-italic"></i></a></li>
                                                                        <li><a href="#"><i
                                                                                    class="uil uil-list-ul"></i></a>
                                                                        </li>
                                                                        <li><a href="#"><i
                                                                                    class="uil uil-left-to-right-text-direction"></i></a>
                                                                        </li>
                                                                        <li><a href="#"><i
                                                                                    class="uil uil-right-to-left-text-direction"></i></a>
                                                                        </li>
                                                                        <li><a href="#"><i
                                                                                    class="uil uil-list-ui-alt"></i></a>
                                                                        </li>
                                                                        <li><a href="#"><i class="uil uil-link"></i></a>
                                                                        </li>
                                                                        <li><a href="#"><i
                                                                                    class="uil uil-text-size"></i></a>
                                                                        </li>
                                                                        <li><a href="#"><i class="uil uil-text"></i></a>
                                                                        </li>
                                                                    </ul>
                                                                    <div class="textarea_dt">
                                                                        <div class="ui form swdh339">
                                                                            <div class="field">
                                                                                <textarea rows="5" name="description"
                                                                                    id="desGeneralCourse"
                                                                                    placeholder="Nhập mô tả khóa học"></textarea>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-5 col-md-6">
                                                            <div class="mt-30 lbel25">
                                                                <label>Thể loại khóa học*</label>
                                                            </div>
                                                            <select data-placeholder="Begin typing a name to filter..."
                                                                multiple name="test" id="cateId"
                                                                class="ui hj145 dropdown cntry152 prompt srch_explore chosen-select">
                                                                <option value="">Chọn thể loại</option>
                                                                <span th:each="item : ${cateName}">
																	<option th:value="${item.id}"
																		th:text="${item.name}"></option>
																</span>
                                                            </select>
                                                        </div>
                                                        <div class="col-lg-4 col-md-6">
                                                            <div class="mt-30 lbel25">
                                                                <label>Cấp độ khóa học*</label>
                                                            </div>
                                                            <select
                                                                class="ui hj145 dropdown cntry152 prompt srch_explore"
                                                                id="levelCourse" >
                                                                <option value="">Chọn cấp độ</option>
                                                                <span th:each="item : ${levelName}">
																	<option th:value="${item.id}"
																		th:text="${item.name}"></option>
																</span>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="price_course">
                                                    <div class="row">
                                                        <!-- <div class="col-lg-12">
                                                            <div class="price_title">
                                                                <h4><i class="uil uil-dollar-sign-alt"></i>Giá</h4>
                                                            </div>
                                                        </div> -->

                                                        <div class="col-lg-3 col-md-4 col-sm-6">

                                                            <div class="ui search focus mt-30 lbel25">
                                                                <label>Giá tiền ($)*</label>
                                                                <div class="ui left icon input swdh19">
                                                                    <input class="prompt srch_explore" type="text"
                                                                        placeholder="Nhập giá của khóa học."
                                                                        name="title" data-purpose="edit-course-title"
                                                                        maxlength="60" id="priceCourse">
                                                                    <!-- <div class="badge_num">60</div> -->
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <!-- <div class="col-lg-2 col-md-3 col-sm-6">
                                                            <div class="mt-30 lbel25">
                                                                <label>Tiền tệ*</label>
                                                            </div>
                                                            <select class="ui hj145 dropdown cntry152 prompt srch_explore">
																<option value="">VND</option>
																<option value="1">USD</option>
																<option value="2">CAD</option>
																<option value="3">BRL</option>
																<option value="4">EUR</option>
																<option value="5">GBP</option>
																<option value="6">INR</option>
															</select>
                                                        </div> -->
                                                    </div>
                                                </div>
                                                <!-- <div class="col-lg-12 col-md-12">
                                                    <div class="course_des_textarea mt-30 lbel25">
                                                        <label>Kết quả đạt được*</label>
                                                        <div class="course_des_bg">
                                                            <ul class="course_des_ttle">
                                                                <li><a href="#"><i class="uil uil-bold"></i></a>
                                                                </li>
                                                                <li><a href="#"><i class="uil uil-italic"></i></a></li>
                                                                <li><a href="#"><i class="uil uil-list-ul"></i></a>
                                                                </li>
                                                                <li><a href="#"><i
																			class="uil uil-left-to-right-text-direction"></i></a>
                                                                </li>
                                                                <li><a href="#"><i
																			class="uil uil-right-to-left-text-direction"></i></a>
                                                                </li>
                                                                <li><a href="#"><i class="uil uil-list-ui-alt"></i></a>
                                                                </li>
                                                                <li><a href="#"><i class="uil uil-link"></i></a>
                                                                </li>
                                                                <li><a href="#"><i class="uil uil-text-size"></i></a>
                                                                </li>
                                                                <li><a href="#"><i class="uil uil-text"></i></a>
                                                                </li>
                                                            </ul>
                                                            <div class="textarea_dt">
                                                                <div class="ui form swdh339">
                                                                    <div class="field">
                                                                        <textarea rows="5" name="description" id="id_course_description" placeholder="Những gì đạt được sau khi hoàn thành khóa học."></textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div> -->
                                            </div>
                                        </div>
                                    </div>
                                    <div class="step-tab-panel step-tab-gallery" id="tab_step2">
                                        <div class="tab-from-content">
                                            <div class="title-icon">
                                                <h3 class="title"><i class="uil uil-image-upload"></i>Hình ảnh / Video
                                                </h3>
                                            </div>
                                            <div class="course__form">
                                                <div class="view_info10">
                                                    <div class="row">

                                                        <div class="col-lg-12">
                                                            <div class="view_all_dt">
                                                                <div class="view_img_left">
                                                                    <div class="view__img">
                                                                        <img id="frame" src="images/courses/add_img.jpg"
                                                                            alt="">

                                                                    </div>
                                                                </div>
                                                                <div class="view_img_right">
                                                                    <h4>Ảnh bìa</h4>
                                                                    <p>Tải lên hình ảnh khóa học của bạn tại đây. Nó
                                                                        phải đáp ứng tiêu chuẩn chất lượng hình ảnh khóa
                                                                        học của chúng tôi để được chấp nhận. Nguyên tắc
                                                                        quan trọng: 750x422 pixel; .jpg, .jpeg,.
                                                                        gif hoặc .png. không có văn bản trên hình ảnh.
                                                                    </p>
                                                                    <div class="upload__input">
                                                                        <div class="input-group">
                                                                            <div class="custom-file">
                                                                                <input type="file" onchange="preview()"
                                                                                    class="custom-file-input"
                                                                                    id="Picture" accept="image/*" />
                                                                                <label class="custom-file-label"
                                                                                    id="namePicture" for="Picture">Chọn
                                                                                    File của
                                                                                    bạn</label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-12">
                                                            <div class="view_all_dt">
                                                                <div class="view_img_left reviewvideo" id="youtube">
                                                                    <div class="view__img" id="player"
                                                                        style="height: 230px;">
                                                                        <img src="images/courses/add_video.jpg" alt="">
                                                                    </div>

                                                                </div>
                                                                <!-- <div class=" view_img_left" id="video"></div> -->
                                                                <div class="view_img_right">
                                                                    <h4>Video giới thiệu</h4>
                                                                    <p>Gắn đính kèm link URL youtube hoặc UploadFile.
                                                                    </p>

                                                                    <div class="upload__input">
                                                                        <div class="input-group">
                                                                            <div class="custom-file">
                                                                                <input id="GFG_UP1" type="text"
                                                                                    size="50%" class="custom-file-label"
                                                                                    placeholder="Gắn link URL của bạn.">
                                                                                <input onclick="GFG_Fun()" type="button"
                                                                                    class="custom-file-label"
                                                                                    value="Xem trước"
                                                                                    style="width: 120px; margin-left: 70%;background-color: #ed2a26;color: aliceblue;">

                                                                                </input>


                                                                            </div>
                                                                            <!-- <input type="file" type="button"
																				class="fileuploader" id="videoage"
																				name="uploadfile">
																			<pre id="infos"
																				class="fileuploader-btn"></pre> -->
                                                                        </div>
                                                                    </div>
                                                                    <br>
                                                                    <div class="upload__input">
                                                                        <div class="input-group">
                                                                            <div class="custom-file">
                                                                                <input type="file" accept=".mp4"
                                                                                    class="custom-file-input fileuploader"
                                                                                    id="videoage" name="uploadfile">
                                                                                <label
                                                                                    class="custom-file-label fileuploader-btn"
                                                                                    id="infos" for="Picture">Chọn
                                                                                    File của
                                                                                    bạn</label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    </form>
                                                                </div>


                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                   
                                </div>

                                <div class="step-footer step-tab-pager">
                                    <button data-direction="prev" class="btn btn-default steps_btn">PREVIOUS</button>
                                    <button data-direction="next" class="btn btn-default steps_btn">Next</button>
                                    <button  onclick="createCourse(event)"  class="btn btn-default steps_btn">Submit for
                                        Review</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Thanh footer -->
        
    </div>

    <script data-cfasync="" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script src="/js/vertical-responsive-menu.min.js"></script>
    <script src="/js/jquery-3.3.1.min.js"></script>
    <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- <script src="vendor/OwlCarousel/owl.carousel.js"></script> -->
    <script src="/vendor/semantic/semantic.min.js"></script>
    <script src="/js/custom.js"></script>
    <script src="/js/night-mode.js"></script>
    <script src="/js/jquery-steps.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
    function uploadSubmit(urlImage, urlVideo, urlYoutbe) {
    	
        console.log('processing....');
		var lcid = document.getElementById('levelCourse').value;
		var userId = document.getElementById('userId').value;
		var nameGeneralCourse = document.getElementById('nameGeneralCourse').value;
		var desGeneralCourse = document.getElementById('desGeneralCourse').value;
		var priceCourse = document.getElementById('priceCourse').value;
    	//get cateId array
        var selected = [];
    for (var option of document.getElementById('cateId').options)
    {
        if (option.selected) {
            selected.push(option.value);
        }
    }
    	
    	var data = {
    			generalCourse:{
    					managerId: userId,
    					name: nameGeneralCourse,
    					description: desGeneralCourse,
    					price: priceCourse,
    					content: null,
    					image: urlImage,
    					urlVideoCourse: urlVideo,
    					urlYoutubeCourse: urlYoutbe
    	    	},
    	    	cateIdArray:selected,
    	    	lvId:lcid
    	}
    	
    	
			axios.post('http://localhost:8080/manager/generalCourse/create',data).then((response) => {
				console.log(response);
			}).catch((error) => {
				console.log(error);
			});
		
    }
    function uploadVideo() {
		console.log('processing....')
		var formData = new FormData();
		const file = document.getElementById('videoage').files[0]
		formData.append("file", file);
		console.log(file.size)
		return uploadPromise(formData);
	}
	
	function uploadPicture() {
		console.log('processing....')
		var formData = new FormData();
		const file = document.getElementById('Picture').files[0]
		formData.append("file", file);
		console.log(file.size)
		return uploadPromise(formData);
	}
	
	const uploadPromise = function(formData){
		return new Promise(function (resolve, reject) {
				axios.post('http://localhost:8080/upload', formData, {
					headers: {
						'Content-Type': 'multipart/form-data'
					}
				}).then((response) => {
					console.log("response" + response.data);
					resolve(response.data) 
				}).catch((error) => {
					console.log(error);
					reject(null);
				});
			})
	}
	
    async function createCourse(e) {
    	e.preventDefault();

		var urlPicture = await uploadPicture();

		var urlVideo = await uploadVideo();
		
		var urlYoutbe = "youtobe";
		console.log(urlPicture)
		console.log(urlVideo)
		uploadSubmit(urlPicture, urlVideo, urlYoutbe)
    }
    </script>
    <script>
        $('#add-course-tab').steps({
            onFinish: function () {
                alert('Wizard Completed');
            }
        });

        var i = 2;

        function themchuongbai() {
            swal({
                    title: "Nhập tiêu đề Chương mới !",
                    text: "<span style='color:#F8BB86'>Không được để trống.<span>",
                    html: true,
                    type: "input",
                    showCancelButton: true,
                    closeOnConfirm: false,
                    animation: "slide-from-top",
                    inputPlaceholder: "Tên chương mới"
                },
                function (inputValue) {
                    // inputValue = inputValue.toUpperCase();
                    if (inputValue === false) return false;

                    if (inputValue.trim() === "") {
                        swal.showInputError("Bạn cần nhập tiêu đề chương mới" + "!");
                        return false
                    }

                    swal("", "Thêm Thành Công!", "success");

                    jQuery("#themchuong").append(
                        '<div class="course__form col-lg-11 col-md-11"> <div class="row"> <div class="col-lg-12 col-md-12"> <div class="view_info10"> <div class="row"> <div class="col-lg-12 col-md-12"> <div class="ui search focus mt-30 lbel25"> <label>Tiêu đề*</label> <div class="ui left icon input swdh19 mota"> <input class="prompt srch_explore first" type="text" placeholder="Nhập tên tiêu đề khóa học." name="title" data-purpose="edit-course-title" maxlength="60" value="' +
                        inputValue +
                        '" > </div> </div> </div> <div class="col-lg-12 col-md-12"> <div class="course_des_textarea mt-30 lbel25"> <label>Mô tả*</label> <div class="course_des_bg"> <ul class="course_des_ttle"> <li><a href="#"><i class="uil uil-bold"></i></a> </li> <li><a href="#"><i class="uil uil-italic"></i></a> </li> <li><a href="#"><i class="uil uil-list-ul"></i></a> </li> <li><a href="#"><i class="uil uil-left-to-right-text-direction"></i></a> </li> <li><a href="#"><i class="uil uil-right-to-left-text-direction"></i></a> </li> <li><a href="#"><i class="uil uil-list-ui-alt"></i></a> </li> <li><a href="#"><i class="uil uil-link"></i></a> </li> <li><a href="#"><i class="uil uil-text-size"></i></a> </li> <li><a href="#"><i class="uil uil-text"></i></a> </li> </ul> <div class="textarea_dt"> <div class="ui form swdh339"> <div class="field"> <textarea rows="5" name="description" id="id_part_description" placeholder="Nhập mô tả chương khóa học vào đây."></textarea> </div> </div> </div> </div> <button class="save_content_btn" style="float: right;margin-top: 10px;" onclick="xoaChuong(this)" type=""> Xóa</button> </div> </div> </div> </div> </div> </div> </div>'
                    )
                    i++;
                });
        }


        function xoaChuong(dlt) {
            swal({
                    title: "Bạn có chắc không?",
                    text: "Nếu bạn xóa bạn sẽ không nhìn thấy chương đã tạo!",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#DD6B55",
                    confirmButtonText: "Có, Tôi muốn xóa!",
                    cancelButtonText: "Không, Thoát!",
                    closeOnConfirm: false,
                    closeOnCancel: false
                },
                function (isConfirm) {
                    if (isConfirm) {
                        $(dlt).parent().parent().parent().parent().parent().parent().parent().remove();
                        swal("Deleted!", "Bạn đã xóa thành công.", "success");
                    } else {

                    }
                });
        }
    </script>

    	   <script>
        $(function () {
            $('#chatbox_html').load('/chatbox');
            $('#menu_user_html').load('/menu_mana', function () {
                $(".Analyics").addClass("active");
            });
            $('#header_html').load('/header');

        })
    </script>
    <!-- Đoạn script về hide / show js  -->
    <!-- <script>

		
		function checkthemchuong(x) { 
			$(".ex-content-" + x).toggle();
			console.log("count = " + x);
		};
		
	</script> -->


    <script>
        var check = false;

        // review video  
        function GFG_Fun() {
            var up = document.getElementById("GFG_UP1");
            var url = up.value;
            var startsWith = url.trim().startsWith("https://www.youtube.com/");
            if (startsWith) {
                var id = url.split("v=")[1].substring(0, 11);

                if (check === false) {
                    var player = new YT.Player('player', {
                        height: '100%',
                        width: '100%',
                        videoId: id
                    });
                    check = true;
                } else {
                    // document.getElementById("video").style.display = "none";
                    // document.getElementById("youtube").style.display = "block";

                    var e = document.getElementsByTagName('iframe')[0];

                    var d = document.createElement('div');
                    d.id = "player";
                    d.style.height = "230px";
                    d.innerHTML = e.innerHTML;

                    e.parentNode.replaceChild(d, e);
                    var player = new YT.Player('player', {
                        height: '100%',
                        width: '100%',
                        videoId: id
                    });
                }
            } else {
                swal({
                    title: "Oops...!",
                    text: "Phải nhập link từ Youtube (https://www.youtube.com/...).",
                    type: "error"

                });
            }
            // "Oops...", "Phải nhập link từ Youtube (https://www.youtube.com/...)",
            //         "error"

        }

        // review ảnh 
        function preview() {
            frame.src = URL.createObjectURL(event.target.files[0]);

        }

        // read size video 
        var infos = document.getElementById('infos');
        infos.textContent = "";
        var fileInput = document.getElementById("videoage");
        fileInput.addEventListener("change", function () {
            var sizevideo = (fileInput.files[0].size / 1024 / 1024).toFixed(2);
            if (sizevideo > 500) {
                alert("file too big");

            }
            var name = document.getElementById("videoage");
            infos.textContent = "\n" + sizevideo + "MB" +
                "\n" + (name.files[0].name);

        });

        jQuery(document).ready(function ($) {


            // document.getElementById("video").style.display = "block";
            // Click button to activate hidden file input
            $('.fileuploader-btn').on('click', function () {

                $('.fileuploader').click();
 
            });

            // Click above calls the open dialog box
            // Once something is selected the change function will run
            $('.fileuploader').change(function () {

                // document.getElementById("youtube").style.display = "none";
                // document.getElementById("video").hidden = false;


                // Create new FileReader as a variable
                var reader = new FileReader();

                // var sai = false;
                // Onload Function will run after video has loaded
                reader.onload = function (file) {

                    var fileContent = file.target.result;
                    $('.reviewvideo').append(
                        '<iframe id="player" style="display:none"> </iframe>' +
                        '<video  src="' + fileContent +
                        '" width="100%" height="100%" controls></video></div>');

                }

                // Get the selected video from Dialog
                reader.readAsDataURL(this.files[0]);

            });

        });

        // choise multiple option



        // check url or video
        function myFunction() {
            // document.getElementById("filevideo").disabled = true;
        }
    </script>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        $(".chosen-select").chosen({
            no_results_text: "Oops, nothing found!"
        })
    </script>
</body>

</html>